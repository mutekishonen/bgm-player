<!-- í‹°ìŠ¤í† ë¦¬ìš© ì„¸ë ¨ëœ ë¯¸ë‹ˆ BGM í”Œë ˆì´ì–´ -->
<div id="tistory-bgm-player" style="
  position: fixed; bottom: 20px; right: 20px;
  background: rgba(0,0,0,0.6); color: white;
  padding: 8px 12px; border-radius: 14px;
  font-family: 'Noto Sans KR', sans-serif;
  display: flex; align-items: center; gap: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  z-index: 9999;
">
  <span id="bgm-title" style="
    max-width: 180px; overflow: hidden;
    text-overflow: ellipsis; white-space: nowrap;
  ">ë¡œë”© ì¤‘...</span>
  <button id="bgm-prev" style="background:none; border:none; color:white; font-size:16px; cursor:pointer;">â®</button>
  <button id="bgm-play" style="background:none; border:none; color:white; font-size:16px; cursor:pointer;">ğŸ”‡</button>
  <button id="bgm-next" style="background:none; border:none; color:white; font-size:16px; cursor:pointer;">â­</button>
  <audio id="bgm-audio" muted autoplay></audio>
</div>

<script>
const playlist = [
  { title: "GAL's Life! (feat. KOTONEHOUSE) - DENONBU", url: "https://raw.githubusercontent.com/mutekishonen/bgm-player/main/GAL's Life! (feat. KOTONOHOUSE....mp3" },
  { title: "DASH - NMIXX", url: "https://raw.githubusercontent.com/mutekishonen/bgm-player/main/DASH-1-NMIXX.mp3" },
  { title: "Password - íŠ¸ë¦¬í”Œì—ìŠ¤", url: "https://raw.githubusercontent.com/mutekishonen/bgm-player/main/Password-1-íŠ¸ë¦¬í”Œì—ìŠ¤.mp3" },
  { title: "SOMETHING AINâ€™T RIGHT - XG", url: "https://raw.githubusercontent.com/mutekishonen/bgm-player/main/SOMETHING AIN'T RIGHT-1-XG.mp3" },
  { title: "Lucky Strike - Maroon 5", url: "https://raw.githubusercontent.com/mutekishonen/bgm-player/main/Lucky Strike-4-Maroon 5.mp3" },
  { title: "ãƒ—ãƒ¬ã‚¤ - Giga", url: "https://raw.githubusercontent.com/mutekishonen/bgm-player/main/ãƒ—ãƒ¬ã‚¤-1-Giga.mp3" }
];

const audio = document.getElementById("bgm-audio");
const titleEl = document.getElementById("bgm-title");
const playBtn = document.getElementById("bgm-play");
const nextBtn = document.getElementById("bgm-next");
const prevBtn = document.getElementById("bgm-prev");

let currentIndex = parseInt(localStorage.getItem("bgmIndex")) || 0;

function loadSong(index) {
  const song = playlist[index];
  titleEl.textContent = song.title;
  audio.src = song.url;
  audio.play().catch(() => console.log("ìë™ì¬ìƒ ì œí•œë¨ (ë¬´ìŒ ìƒíƒœì—ì„œ ì‹œì‘)"));
}

function updateIcon() {
  if (audio.paused) playBtn.textContent = "â–¶";
  else if (audio.muted) playBtn.textContent = "ğŸ”‡";
  else playBtn.textContent = "ğŸ”Š";
}

playBtn.addEventListener("click", () => {
  if (audio.muted) {
    audio.muted = false;
    updateIcon();
  } else if (audio.paused) {
    audio.play();
    updateIcon();
  } else {
    audio.pause();
    updateIcon();
  }
});

nextBtn.addEventListener("click", () => {
  currentIndex = (currentIndex + 1) % playlist.length;
  loadSong(currentIndex);
});

prevBtn.addEventListener("click", () => {
  currentIndex = (currentIndex - 1 + playlist.length) % playlist.length;
  loadSong(currentIndex);
});

audio.addEventListener("ended", () => {
  currentIndex = (currentIndex + 1) % playlist.length;
  loadSong(currentIndex);
});

window.addEventListener("load", () => {
  loadSong(currentIndex);
  updateIcon();
});
</script>
